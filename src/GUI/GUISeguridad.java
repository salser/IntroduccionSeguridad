/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package GUI;

import java.awt.PopupMenu;
import java.awt.event.ActionEvent;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.PrintWriter;
import java.io.Serializable;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.List;
import java.util.SimpleTimeZone;
import java.util.TimeZone;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.crypto.BadPaddingException;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;
import javax.swing.DefaultListModel;
import javax.swing.JFileChooser;
import javax.swing.ListModel;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;
import javax.swing.table.TableModel;
import javax.swing.text.Element;
import negocio.Archivo;
import negocio.Contrasena;
import negocio.DatosFinancieros;
import negocio.DatosMedicos;
import negocio.Grupo;
import negocio.Persona;
import negocio.Publicacion;
import negocio.Sistema;
import sun.util.calendar.Gregorian;

/**
 *
 * @author MSI
 */
public class GUISeguridad extends javax.swing.JFrame implements Serializable {

    public static Sistema sistema;

    /**
     * Creates new form GUISeguridad
     */
    public GUISeguridad() {
        initComponents();
        sistema = new Sistema();
        cargarSistema();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jTabSegu = new javax.swing.JTabbedPane();
        jpanelHome = new javax.swing.JPanel();
        jTabbedPaneHome = new javax.swing.JTabbedPane();
        jPanelLogIn = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jTextFieldEmail = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        contraLogIn = new javax.swing.JPasswordField();
        jbtnLogIn = new javax.swing.JButton();
        jpanelCrearUsu = new javax.swing.JPanel();
        jLabel24 = new javax.swing.JLabel();
        jtextFieldNomUsu = new javax.swing.JTextField();
        jLabel25 = new javax.swing.JLabel();
        jtextFieldCorreoCrear = new javax.swing.JTextField();
        jLabel26 = new javax.swing.JLabel();
        contraCrear1 = new javax.swing.JPasswordField();
        jLabel27 = new javax.swing.JLabel();
        contraRepitaCrear1 = new javax.swing.JPasswordField();
        jLabel28 = new javax.swing.JLabel();
        jtextNombreCrear = new javax.swing.JTextField();
        jLabel29 = new javax.swing.JLabel();
        jtextApellidoCrear = new javax.swing.JTextField();
        btnCrearUsuario1 = new javax.swing.JButton();
        jLabel30 = new javax.swing.JLabel();
        jtextIngresosMensualesCrear1 = new javax.swing.JTextField();
        jLabel31 = new javax.swing.JLabel();
        jtextIngresosTotalesCrear1 = new javax.swing.JTextField();
        comoTipo = new javax.swing.JComboBox<>();
        jLabel3 = new javax.swing.JLabel();
        jPanelPerfil = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        jtextNombreApellidoPerfil = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jtextIngresosMensualesPerfil = new javax.swing.JTextField();
        jLabel12 = new javax.swing.JLabel();
        jtextIngresosTotalesPerfil = new javax.swing.JTextField();
        jLabel13 = new javax.swing.JLabel();
        comboGastoPerfil = new javax.swing.JComboBox<>();
        jLabel14r = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        comboCitasPerfil = new javax.swing.JComboBox<>();
        labelDatosCita = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        jtextNombreUsuarioPerfil = new javax.swing.JTextField();
        jPanelGrupos = new javax.swing.JPanel();
        jLabel18 = new javax.swing.JLabel();
        comboVerGrupos = new javax.swing.JComboBox<>();
        labelPublicacionesGrupo = new javax.swing.JLabel();
        btnMostrarPublicaciones = new javax.swing.JButton();
        jSeparator2 = new javax.swing.JSeparator();
        jLabel19 = new javax.swing.JLabel();
        jLabel20 = new javax.swing.JLabel();
        jtextNombreGrupoCrear = new javax.swing.JTextField();
        jLabel21 = new javax.swing.JLabel();
        jtextTipoGrupoCrear = new javax.swing.JTextField();
        jSeparator1 = new javax.swing.JSeparator();
        btnCrearGrupo = new javax.swing.JButton();
        jLabel22 = new javax.swing.JLabel();
        comboPublicarGrupo = new javax.swing.JComboBox<>();
        jLabel23 = new javax.swing.JLabel();
        jtextNuevaPublicacion = new javax.swing.JTextField();
        btnPublicar = new javax.swing.JButton();
        jTextFieldNuevoTitulo = new javax.swing.JTextField();
        jComboBoxListPublicaciones = new javax.swing.JComboBox<>();
        jButtonSolicitar = new javax.swing.JButton();
        jButtonActulizarGruposDisponibles = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTextAreaPublicacion = new javax.swing.JTextArea();
        jLabel7 = new javax.swing.JLabel();
        jPanelSolicitudes = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jList1Solicitudes = new javax.swing.JList<>();
        jButtonAceptarSolicitud = new javax.swing.JButton();
        jButtonRechazarSolicitud = new javax.swing.JButton();
        jToggleButtonActualizarSolicitudes = new javax.swing.JToggleButton();
        jComboBoxGrupoSolicitud = new javax.swing.JComboBox<>();
        jLabel4 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jScrollPane6 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jTabbedPane2 = new javax.swing.JTabbedPane();
        jPanel2 = new javax.swing.JPanel();
        jButtonCargarArchivos = new javax.swing.JButton();
        jButtonDescargaArchivos = new javax.swing.JButton();
        jLabel8 = new javax.swing.JLabel();
        jScrollPane4 = new javax.swing.JScrollPane();
        jScrollPane3 = new javax.swing.JScrollPane();
        jTableMisArchivos = new javax.swing.JTable();
        jLabel16 = new javax.swing.JLabel();
        jComboBox1 = new javax.swing.JComboBox<>();
        jLabel17 = new javax.swing.JLabel();
        jLabel32 = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        jScrollPane5 = new javax.swing.JScrollPane();
        jTableArchivosCompartidos = new javax.swing.JTable();
        jLabel9 = new javax.swing.JLabel();
        jButtonDescargarArchivoCompartido = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jTabSegu.setEnabled(false);
        jTabSegu.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jTabSeguFocusGained(evt);
            }
        });

        jLabel1.setText("Correo Electrónico");

        jTextFieldEmail.setText("asdasd@mail.com");
        jTextFieldEmail.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jTextFieldEmailFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                jTextFieldEmailFocusLost(evt);
            }
        });

        jLabel2.setText("Contraseña");

        jbtnLogIn.setText("Ingresar");
        jbtnLogIn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jbtnLogInActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanelLogInLayout = new javax.swing.GroupLayout(jPanelLogIn);
        jPanelLogIn.setLayout(jPanelLogInLayout);
        jPanelLogInLayout.setHorizontalGroup(
            jPanelLogInLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelLogInLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelLogInLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(jbtnLogIn, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jTextFieldEmail, javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel1, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 141, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(contraLogIn, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 198, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanelLogInLayout.setVerticalGroup(
            jPanelLogInLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelLogInLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTextFieldEmail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(contraLogIn, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(21, 21, 21)
                .addComponent(jbtnLogIn)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jTabbedPaneHome.addTab("Iniciar Sesión", jPanelLogIn);

        jLabel24.setText("Nombre Usuario");

        jLabel25.setText("Correo Electrónico");

        jLabel26.setText("Contraseña");

        jLabel27.setText("Repita la Contraseña");

        jLabel28.setText("Nombre");

        jLabel29.setText("Apellido");

        btnCrearUsuario1.setText("Crear Usuario");
        btnCrearUsuario1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCrearUsuario1ActionPerformed(evt);
            }
        });

        jLabel30.setText("Ingresos Mensuales");

        jLabel31.setText("Ingresos Totales");

        comoTipo.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Medico", "Banquero", "Usuario"}));

        jLabel3.setText("Rol");

        javax.swing.GroupLayout jpanelCrearUsuLayout = new javax.swing.GroupLayout(jpanelCrearUsu);
        jpanelCrearUsu.setLayout(jpanelCrearUsuLayout);
        jpanelCrearUsuLayout.setHorizontalGroup(
            jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jpanelCrearUsuLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btnCrearUsuario1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(jpanelCrearUsuLayout.createSequentialGroup()
                        .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jtextFieldNomUsu)
                            .addComponent(jLabel24, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel25, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jtextFieldCorreoCrear, javax.swing.GroupLayout.DEFAULT_SIZE, 185, Short.MAX_VALUE)
                            .addComponent(jLabel26, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(contraCrear1)
                            .addComponent(jLabel27, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(contraRepitaCrear1))
                        .addGap(87, 87, 87)
                        .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jpanelCrearUsuLayout.createSequentialGroup()
                                .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jLabel28, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jtextNombreCrear)
                                    .addComponent(jLabel30, javax.swing.GroupLayout.DEFAULT_SIZE, 169, Short.MAX_VALUE)
                                    .addComponent(jtextIngresosMensualesCrear1)
                                    .addComponent(comoTipo, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jLabel29, javax.swing.GroupLayout.PREFERRED_SIZE, 124, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jtextApellidoCrear)
                                    .addComponent(jLabel31, javax.swing.GroupLayout.DEFAULT_SIZE, 169, Short.MAX_VALUE)
                                    .addComponent(jtextIngresosTotalesCrear1)))
                            .addComponent(jLabel3))
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jpanelCrearUsuLayout.setVerticalGroup(
            jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jpanelCrearUsuLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel24)
                    .addComponent(jLabel28)
                    .addComponent(jLabel29))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jtextFieldNomUsu, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jtextNombreCrear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jtextApellidoCrear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel25)
                    .addComponent(jLabel30)
                    .addComponent(jLabel31))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jtextFieldCorreoCrear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jtextIngresosMensualesCrear1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jtextIngresosTotalesCrear1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel26)
                    .addComponent(jLabel3))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jpanelCrearUsuLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(contraCrear1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(comoTipo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jLabel27)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(contraRepitaCrear1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(btnCrearUsuario1)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jTabbedPaneHome.addTab("Crear Usuario", jpanelCrearUsu);

        javax.swing.GroupLayout jpanelHomeLayout = new javax.swing.GroupLayout(jpanelHome);
        jpanelHome.setLayout(jpanelHomeLayout);
        jpanelHomeLayout.setHorizontalGroup(
            jpanelHomeLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jpanelHomeLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTabbedPaneHome, javax.swing.GroupLayout.DEFAULT_SIZE, 1137, Short.MAX_VALUE)
                .addContainerGap())
        );
        jpanelHomeLayout.setVerticalGroup(
            jpanelHomeLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jpanelHomeLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTabbedPaneHome, javax.swing.GroupLayout.PREFERRED_SIZE, 551, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jTabSegu.addTab("Home", jpanelHome);

        jPanelPerfil.setEnabled(false);

        jLabel5.setText("Nombre y Apellido");

        jtextNombreApellidoPerfil.setEnabled(false);

        jLabel10.setFont(new java.awt.Font("Tahoma", 1, 13)); // NOI18N
        jLabel10.setText("Datos Financieros");

        jLabel11.setText("Ingresos Mensuales");

        jtextIngresosMensualesPerfil.setEnabled(false);

        jLabel12.setText("Ingresos Totales");

        jtextIngresosTotalesPerfil.setEnabled(false);

        jLabel13.setText("Gastos");

        comboGastoPerfil.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] {}));
        comboGastoPerfil.setEnabled(false);

        jLabel14r.setFont(new java.awt.Font("Tahoma", 1, 13)); // NOI18N
        jLabel14r.setText("Datos Medicos");

        jLabel14.setText("Citas");

        comboCitasPerfil.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] {}));
        comboCitasPerfil.setEnabled(false);

        labelDatosCita.setText("Datos Cita");
        labelDatosCita.setEnabled(false);

        jLabel15.setText("Nombre Usuario");

        jtextNombreUsuarioPerfil.setEnabled(false);

        javax.swing.GroupLayout jPanelPerfilLayout = new javax.swing.GroupLayout(jPanelPerfil);
        jPanelPerfil.setLayout(jPanelPerfilLayout);
        jPanelPerfilLayout.setHorizontalGroup(
            jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelPerfilLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanelPerfilLayout.createSequentialGroup()
                        .addComponent(labelDatosCita, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addContainerGap(1077, Short.MAX_VALUE))
                    .addGroup(jPanelPerfilLayout.createSequentialGroup()
                        .addGroup(jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(comboCitasPerfil, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(jPanelPerfilLayout.createSequentialGroup()
                                .addGroup(jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(jLabel14, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jLabel14r, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jLabel5, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jtextNombreApellidoPerfil, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel10, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 155, Short.MAX_VALUE)
                                    .addComponent(jtextIngresosMensualesPerfil, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel11, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                .addGap(18, 18, 18)
                                .addGroup(jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jLabel12, javax.swing.GroupLayout.DEFAULT_SIZE, 140, Short.MAX_VALUE)
                                    .addComponent(jtextIngresosTotalesPerfil)
                                    .addComponent(jLabel15, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jtextNombreUsuarioPerfil))))
                        .addGap(18, 18, 18)
                        .addGroup(jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel13, javax.swing.GroupLayout.PREFERRED_SIZE, 144, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(comboGastoPerfil, javax.swing.GroupLayout.PREFERRED_SIZE, 187, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addContainerGap(625, Short.MAX_VALUE))))
        );
        jPanelPerfilLayout.setVerticalGroup(
            jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelPerfilLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(jLabel15))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jtextNombreApellidoPerfil, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jtextNombreUsuarioPerfil, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(jLabel10)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel11)
                    .addComponent(jLabel12)
                    .addComponent(jLabel13))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelPerfilLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jtextIngresosMensualesPerfil, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jtextIngresosTotalesPerfil, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(comboGastoPerfil, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(jLabel14r)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jLabel14)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(comboCitasPerfil, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(labelDatosCita, javax.swing.GroupLayout.PREFERRED_SIZE, 218, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(72, Short.MAX_VALUE))
        );

        jTabSegu.addTab("Perfil", jPanelPerfil);

        jLabel18.setFont(new java.awt.Font("Tahoma", 1, 13)); // NOI18N
        jLabel18.setText("Crear Grupo");

        comboVerGrupos.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] {}));
        comboVerGrupos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboVerGruposActionPerformed(evt);
            }
        });

        labelPublicacionesGrupo.setText("Publicación grupo seleccionado");

        btnMostrarPublicaciones.setText("Mostrar Publicaciones");
        btnMostrarPublicaciones.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnMostrarPublicacionesActionPerformed(evt);
            }
        });

        jLabel19.setFont(new java.awt.Font("Tahoma", 1, 13)); // NOI18N
        jLabel19.setText("Nombre Grupo");

        jLabel20.setText("Nombre");

        jtextNombreGrupoCrear.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jtextNombreGrupoCrearActionPerformed(evt);
            }
        });

        jLabel21.setText("Tipo");

        btnCrearGrupo.setText("Crear Grupo");
        btnCrearGrupo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCrearGrupoActionPerformed(evt);
            }
        });

        jLabel22.setFont(new java.awt.Font("Tahoma", 1, 13)); // NOI18N
        jLabel22.setText("Publicar en Grupo");

        comboPublicarGrupo.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] {}));
        comboPublicarGrupo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboPublicarGrupoActionPerformed(evt);
            }
        });

        jLabel23.setText("Publicación");

        btnPublicar.setText("Publicar");
        btnPublicar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnPublicarActionPerformed(evt);
            }
        });

        jTextFieldNuevoTitulo.setText("inserte titulo");
        jTextFieldNuevoTitulo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextFieldNuevoTituloActionPerformed(evt);
            }
        });

        jComboBoxListPublicaciones.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        jComboBoxListPublicaciones.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBoxListPublicacionesActionPerformed(evt);
            }
        });

        jButtonSolicitar.setText("Solicitar ingreso");
        jButtonSolicitar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSolicitarActionPerformed(evt);
            }
        });

        jButtonActulizarGruposDisponibles.setText("Actualizar");
        jButtonActulizarGruposDisponibles.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonActulizarGruposDisponiblesActionPerformed(evt);
            }
        });

        jTextAreaPublicacion.setColumns(20);
        jTextAreaPublicacion.setRows(5);
        jScrollPane2.setViewportView(jTextAreaPublicacion);

        jLabel7.setText("Descripción de grupo:");

        javax.swing.GroupLayout jPanelGruposLayout = new javax.swing.GroupLayout(jPanelGrupos);
        jPanelGrupos.setLayout(jPanelGruposLayout);
        jPanelGruposLayout.setHorizontalGroup(
            jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jSeparator1)
            .addGroup(jPanelGruposLayout.createSequentialGroup()
                .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanelGruposLayout.createSequentialGroup()
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel22, javax.swing.GroupLayout.PREFERRED_SIZE, 172, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                .addComponent(btnPublicar, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(comboPublicarGrupo, javax.swing.GroupLayout.Alignment.LEADING, 0, 150, Short.MAX_VALUE)
                                .addComponent(jButtonActulizarGruposDisponibles, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanelGruposLayout.createSequentialGroup()
                                .addGap(9, 9, 9)
                                .addComponent(jLabel23, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jTextFieldNuevoTitulo, javax.swing.GroupLayout.PREFERRED_SIZE, 201, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanelGruposLayout.createSequentialGroup()
                                .addGap(19, 19, 19)
                                .addComponent(jtextNuevaPublicacion, javax.swing.GroupLayout.PREFERRED_SIZE, 463, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(jPanelGruposLayout.createSequentialGroup()
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jtextNombreGrupoCrear, javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel20, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabel18, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(35, 35, 35)
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jLabel21, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jtextTipoGrupoCrear, javax.swing.GroupLayout.PREFERRED_SIZE, 169, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(52, 52, 52)
                        .addComponent(btnCrearGrupo)))
                .addGap(0, 0, Short.MAX_VALUE))
            .addGroup(jPanelGruposLayout.createSequentialGroup()
                .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanelGruposLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jSeparator2))
                    .addGroup(jPanelGruposLayout.createSequentialGroup()
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanelGruposLayout.createSequentialGroup()
                                .addComponent(jLabel19, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(comboVerGrupos, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanelGruposLayout.createSequentialGroup()
                                .addGap(29, 29, 29)
                                .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(labelPublicacionesGrupo, javax.swing.GroupLayout.PREFERRED_SIZE, 217, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabel7))))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jButtonSolicitar, javax.swing.GroupLayout.PREFERRED_SIZE, 176, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(btnMostrarPublicaciones))
                        .addGap(40, 40, 40)
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 486, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jComboBoxListPublicaciones, javax.swing.GroupLayout.PREFERRED_SIZE, 280, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(123, 123, 123)))
                .addContainerGap())
        );
        jPanelGruposLayout.setVerticalGroup(
            jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelGruposLayout.createSequentialGroup()
                .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanelGruposLayout.createSequentialGroup()
                        .addGap(28, 28, 28)
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(comboVerGrupos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jComboBoxListPublicaciones, javax.swing.GroupLayout.PREFERRED_SIZE, 29, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel19)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanelGruposLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(btnMostrarPublicaciones)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanelGruposLayout.createSequentialGroup()
                        .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 117, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(35, 35, 35))
                    .addGroup(jPanelGruposLayout.createSequentialGroup()
                        .addComponent(jLabel7)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(labelPublicacionesGrupo, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jButtonSolicitar, javax.swing.GroupLayout.Alignment.LEADING))
                .addGap(26, 26, 26)
                .addComponent(jSeparator2, javax.swing.GroupLayout.PREFERRED_SIZE, 0, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(12, 12, 12)
                .addComponent(jLabel22)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanelGruposLayout.createSequentialGroup()
                        .addComponent(comboPublicarGrupo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, Short.MAX_VALUE))
                    .addGroup(jPanelGruposLayout.createSequentialGroup()
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanelGruposLayout.createSequentialGroup()
                                .addGap(38, 38, 38)
                                .addComponent(jButtonActulizarGruposDisponibles)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnPublicar))
                            .addGroup(jPanelGruposLayout.createSequentialGroup()
                                .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel23)
                                    .addComponent(jTextFieldNuevoTitulo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jtextNuevaPublicacion, javax.swing.GroupLayout.PREFERRED_SIZE, 131, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel18)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel20)
                            .addComponent(jLabel21))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanelGruposLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jtextNombreGrupoCrear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jtextTipoGrupoCrear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(btnCrearGrupo))
                        .addGap(117, 117, 117))))
        );

        jTabSegu.addTab("Grupos", jPanelGrupos);

        jList1Solicitudes.setModel(new javax.swing.AbstractListModel<String>() {
            String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
            public int getSize() { return strings.length; }
            public String getElementAt(int i) { return strings[i]; }
        });
        jList1Solicitudes.addAncestorListener(new javax.swing.event.AncestorListener() {
            public void ancestorMoved(javax.swing.event.AncestorEvent evt) {
            }
            public void ancestorAdded(javax.swing.event.AncestorEvent evt) {
                jList1SolicitudesAncestorAdded(evt);
            }
            public void ancestorRemoved(javax.swing.event.AncestorEvent evt) {
            }
        });
        jList1Solicitudes.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jList1SolicitudesFocusGained(evt);
            }
        });
        jScrollPane1.setViewportView(jList1Solicitudes);

        jButtonAceptarSolicitud.setText("Aceptar");
        jButtonAceptarSolicitud.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonAceptarSolicitudActionPerformed(evt);
            }
        });

        jButtonRechazarSolicitud.setText("Rechazar");
        jButtonRechazarSolicitud.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonRechazarSolicitudActionPerformed(evt);
            }
        });

        jToggleButtonActualizarSolicitudes.setText("Actualizar");
        jToggleButtonActualizarSolicitudes.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jToggleButtonActualizarSolicitudesActionPerformed(evt);
            }
        });

        jComboBoxGrupoSolicitud.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        jComboBoxGrupoSolicitud.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBoxGrupoSolicitudActionPerformed(evt);
            }
        });

        jLabel4.setText("Grupo");

        jLabel6.setText("Solicitudes");

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null}
            },
            new String [] {
                "Nombre", "Apellido", "Correo"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, true, true
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane6.setViewportView(jTable1);

        javax.swing.GroupLayout jPanelSolicitudesLayout = new javax.swing.GroupLayout(jPanelSolicitudes);
        jPanelSolicitudes.setLayout(jPanelSolicitudesLayout);
        jPanelSolicitudesLayout.setHorizontalGroup(
            jPanelSolicitudesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanelSolicitudesLayout.createSequentialGroup()
                .addContainerGap(99, Short.MAX_VALUE)
                .addGroup(jPanelSolicitudesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel6)
                    .addComponent(jLabel4))
                .addGap(45, 45, 45)
                .addGroup(jPanelSolicitudesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jComboBoxGrupoSolicitud, javax.swing.GroupLayout.PREFERRED_SIZE, 147, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanelSolicitudesLayout.createSequentialGroup()
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 609, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(53, 53, 53)
                        .addGroup(jPanelSolicitudesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jButtonAceptarSolicitud, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jToggleButtonActualizarSolicitudes)
                            .addComponent(jButtonRechazarSolicitud)))
                    .addComponent(jScrollPane6, javax.swing.GroupLayout.PREFERRED_SIZE, 575, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(167, 167, 167))
        );
        jPanelSolicitudesLayout.setVerticalGroup(
            jPanelSolicitudesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelSolicitudesLayout.createSequentialGroup()
                .addGap(38, 38, 38)
                .addGroup(jPanelSolicitudesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(jComboBoxGrupoSolicitud, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanelSolicitudesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanelSolicitudesLayout.createSequentialGroup()
                        .addGap(83, 83, 83)
                        .addComponent(jLabel6))
                    .addGroup(jPanelSolicitudesLayout.createSequentialGroup()
                        .addGap(24, 24, 24)
                        .addGroup(jPanelSolicitudesLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 142, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanelSolicitudesLayout.createSequentialGroup()
                                .addComponent(jToggleButtonActualizarSolicitudes)
                                .addGap(29, 29, 29)
                                .addComponent(jButtonAceptarSolicitud)
                                .addGap(26, 26, 26)
                                .addComponent(jButtonRechazarSolicitud)))))
                .addGap(70, 70, 70)
                .addComponent(jScrollPane6, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(152, Short.MAX_VALUE))
        );

        jTabSegu.addTab("Solicitudes", jPanelSolicitudes);

        jButtonCargarArchivos.setText("Cargar archivos");
        jButtonCargarArchivos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCargarArchivosActionPerformed(evt);
            }
        });

        jButtonDescargaArchivos.setText("Descargar archivo");
        jButtonDescargaArchivos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonDescargaArchivosActionPerformed(evt);
            }
        });

        jLabel8.setText("Archivos disponibles");

        jTableMisArchivos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null},
                {null, null},
                {null, null},
                {null, null}
            },
            new String [] {
                "Fecha", "Nombre Archivo"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane3.setViewportView(jTableMisArchivos);

        jScrollPane4.setViewportView(jScrollPane3);

        jLabel16.setText("Cargar archivos");

        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

        jLabel17.setText("Tipo de archivo:");

        jLabel32.setText("Descargar archivo:");

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(96, 96, 96)
                        .addComponent(jLabel8))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGap(107, 107, 107)
                        .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 597, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addGap(84, 84, 84)
                                .addComponent(jLabel17)
                                .addGap(18, 18, 18)
                                .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(27, 27, 27)
                                .addComponent(jButtonCargarArchivos))
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addGap(54, 54, 54)
                                .addComponent(jLabel16)))
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addGap(36, 36, 36)
                                .addComponent(jButtonDescargaArchivos))
                            .addGroup(jPanel2Layout.createSequentialGroup()
                                .addGap(51, 51, 51)
                                .addComponent(jLabel32)))))
                .addContainerGap(424, Short.MAX_VALUE))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                .addGap(18, 18, 18)
                .addComponent(jLabel8)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 233, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(26, 26, 26)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel16)
                    .addComponent(jLabel32))
                .addGap(17, 17, 17)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel17)
                    .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButtonCargarArchivos)
                    .addComponent(jButtonDescargaArchivos))
                .addGap(223, 223, 223))
        );

        jTabbedPane2.addTab("Mis archivos", jPanel2);

        jTableArchivosCompartidos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null},
                {null, null, null}
            },
            new String [] {
                "Fecha", "Nombre de Archivo", "Usuario"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane5.setViewportView(jTableArchivosCompartidos);

        jLabel9.setText("Archivos compartidos conmigo:");

        jButtonDescargarArchivoCompartido.setText("Descargar archivo");
        jButtonDescargarArchivoCompartido.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonDescargarArchivoCompartidoActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(70, 70, 70)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel9)
                            .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 521, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(257, 257, 257)
                        .addComponent(jButtonDescargarArchivoCompartido)))
                .addContainerGap(537, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGap(35, 35, 35)
                .addComponent(jLabel9)
                .addGap(28, 28, 28)
                .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 180, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jButtonDescargarArchivoCompartido)
                .addContainerGap(201, Short.MAX_VALUE))
        );

        jTabbedPane2.addTab("Archivos compartidos", jPanel3);

        jTabSegu.addTab("Archivos", jTabbedPane2);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTabSegu)
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTabSegu, javax.swing.GroupLayout.PREFERRED_SIZE, 599, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jComboBoxGrupoSolicitudActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBoxGrupoSolicitudActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jComboBoxGrupoSolicitudActionPerformed

    private void jToggleButtonActualizarSolicitudesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jToggleButtonActualizarSolicitudesActionPerformed
        // TODO add your handling code here:
        jList1Solicitudes.updateUI();
        jComboBoxGrupoSolicitud.removeAllItems();
        Persona p = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                p = pe;
            }
        }
        DefaultListModel<String> model = new DefaultListModel<>();

        for (Grupo g : sistema.getGrupos()) {

            if (g.getAdmin().getCorreo().equals(jTextFieldEmail.getText())) {
                jComboBoxGrupoSolicitud.addItem(g.getNombreG());

            }
        }
        if (jComboBoxGrupoSolicitud.isEnabled()) {
            for (Grupo g : sistema.getGrupos()) {
                if (g.getNombreG().equals(jComboBoxGrupoSolicitud.getSelectedItem())) {
                    if (g.getAdmin().getCorreo().equals(jTextFieldEmail.getText())) {

                        for (Persona per : g.getSolicitudes()) {
                            model.addElement(per.getCorreo());
                        }
                        jList1Solicitudes.setModel(model);
                        g.getSolicitudes().remove(p);
                    }

                }
            }
        }
    }//GEN-LAST:event_jToggleButtonActualizarSolicitudesActionPerformed

    private void jButtonRechazarSolicitudActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonRechazarSolicitudActionPerformed
        // TODO add your handling code here:
        Persona pep = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                pep = pe;
            }
        }
        crearLog("Rechazo de solicitud", pep.getNomUsuario());
        for (Grupo g : sistema.getGrupos()) {
            if (g.getNombreG().equals(jComboBoxGrupoSolicitud.getSelectedItem())) {
                for (Persona p : sistema.getPersonas()) {
                    if (p.getCorreo().equals(jList1Solicitudes.getSelectedValue())) {

                        DefaultListModel<String> model = (DefaultListModel<String>) jList1Solicitudes.getModel();
                        model.remove(jList1Solicitudes.getSelectedIndex());
                        jList1Solicitudes.setModel(model);
                        jList1Solicitudes.updateUI();
                        g.getSolicitudes().remove(p);
                    }
                }
            }
        }
    }//GEN-LAST:event_jButtonRechazarSolicitudActionPerformed

    private void jButtonAceptarSolicitudActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonAceptarSolicitudActionPerformed
        // TODO add your handling code here
        Persona pep = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                pep = pe;
            }
        }
        crearLog("Acepto solicitud", pep.getNomUsuario());
        for (Grupo g : sistema.getGrupos()) {
            if (g.getNombreG().equals(jComboBoxGrupoSolicitud.getSelectedItem())) {
                for (Persona p : sistema.getPersonas()) {
                    if (p.getCorreo().equals(jList1Solicitudes.getSelectedValue())) {
                        g.getUsuarios().add(p);
                        DefaultListModel<String> model = (DefaultListModel<String>) jList1Solicitudes.getModel();
                        model.remove(jList1Solicitudes.getSelectedIndex());
                        jList1Solicitudes.setModel(model);
                        jList1Solicitudes.updateUI();
                    }
                }
            }
        }
    }//GEN-LAST:event_jButtonAceptarSolicitudActionPerformed

    private void jList1SolicitudesAncestorAdded(javax.swing.event.AncestorEvent evt) {//GEN-FIRST:event_jList1SolicitudesAncestorAdded
        // TODO add your handling code here:
    }//GEN-LAST:event_jList1SolicitudesAncestorAdded

    private void jButtonActulizarGruposDisponiblesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonActulizarGruposDisponiblesActionPerformed
        // TODO add your handling code here:
        comboPublicarGrupo.removeAllItems();
        Persona p = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                p = pe;
            }
        }
        for (Grupo gr : sistema.getGrupos()) {
            if (gr.getUsuarios().contains(p) || gr.getAdmin().getCorreo().equalsIgnoreCase(p.getCorreo())) {
                String elemento = gr.getNombreG();
                comboPublicarGrupo.addItem(elemento);
            }

        }
    }//GEN-LAST:event_jButtonActulizarGruposDisponiblesActionPerformed

    private void jButtonSolicitarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonSolicitarActionPerformed
        // TODO add your handling code here:
        Persona pep = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                pep = pe;
            }
        }
        crearLog("Realizo solicitud", pep.getNomUsuario());
        Persona p = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                p = pe;
            }
        }
        for (Grupo g : sistema.getGrupos()) {
            if (comboVerGrupos.getSelectedItem().toString().equals(g.getNombreG())) {
                g.getSolicitudes().add(p);
            }
        }
        try {
            guardarSistema();
        } catch (IOException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_jButtonSolicitarActionPerformed

    private void jComboBoxListPublicacionesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBoxListPublicacionesActionPerformed
        // TODO add your handling code here:
        if (jComboBoxListPublicaciones.isEnabled()) {
            for (Grupo gr : sistema.getGrupos()) {
                for (Publicacion pu : gr.getPublicaciones()) {
                    if (pu.getTitulo().equals(jComboBoxListPublicaciones.getSelectedItem())) {
                        try {
                            jTextAreaPublicacion.setText(pu.getTexto());
                        } catch (Exception ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                }
            }
        }
    }//GEN-LAST:event_jComboBoxListPublicacionesActionPerformed

    private void jTextFieldNuevoTituloActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextFieldNuevoTituloActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextFieldNuevoTituloActionPerformed

    private void btnPublicarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnPublicarActionPerformed
        // TODO add your handling code here:
        Persona p = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                p = pe;
            }
        }
        try {
            Publicacion pu = new Publicacion(jTextFieldNuevoTitulo.getText(), jtextNuevaPublicacion.getText(), p);

            for (Grupo gr : sistema.getGrupos()) {
                if (comboPublicarGrupo.getSelectedItem().toString().equals(gr.getNombreG())) {
                    gr.getPublicaciones().add(pu);
                    crearLog("Pulicó", p.getNomUsuario() + " a " + gr.getNombreG());
                }
            }

            guardarSistema();
        } catch (NoSuchAlgorithmException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (NoSuchPaddingException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IllegalBlockSizeException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (BadPaddingException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InvalidKeyException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InvalidAlgorithmParameterException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_btnPublicarActionPerformed

    private void comboPublicarGrupoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboPublicarGrupoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_comboPublicarGrupoActionPerformed

    private void btnCrearGrupoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCrearGrupoActionPerformed
        // TODO add your handling code here:
        Persona p = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                p = pe;
            }
        }
        Grupo gr = new Grupo(jtextNombreGrupoCrear.getText(), jtextTipoGrupoCrear.getText(), p);
        sistema.getGrupos().add(gr);
        String elemento = jtextNombreGrupoCrear.getText();
        comboVerGrupos.addItem(elemento);
        comboPublicarGrupo.addItem(elemento);
        crearLog("Creó Grupo", p.getNomUsuario() + " nombre " + elemento);
        try {
            guardarSistema();
            //jtextPublicacion.updateUI();
        } catch (IOException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_btnCrearGrupoActionPerformed

    private void jtextNombreGrupoCrearActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jtextNombreGrupoCrearActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jtextNombreGrupoCrearActionPerformed

    private void btnMostrarPublicacionesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnMostrarPublicacionesActionPerformed
        // TODO add your handling code here:
        Persona p = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                p = pe;
            }
        }
        jComboBoxListPublicaciones.removeAllItems();
        for (Grupo g : sistema.getGrupos()) {
            if (g.getUsuarios().contains(p) || g.getAdmin().getCorreo().equalsIgnoreCase(p.getCorreo())) {
                String elemento = g.getNombreG();
                comboPublicarGrupo.addItem(elemento);

                if (comboVerGrupos.getSelectedItem().toString().equals(g.getNombreG())) {
                    for (Publicacion pu : g.getPublicaciones()) {
                        jComboBoxListPublicaciones.addItem(pu.getTitulo());
                    }

                }
            }
        }
        jComboBoxListPublicaciones.updateUI();
    }//GEN-LAST:event_btnMostrarPublicacionesActionPerformed

    private void comboVerGruposActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboVerGruposActionPerformed
        // TODO add your handling code here:
        if (comboVerGrupos.isEnabled()) {
            String grupo = comboVerGrupos.getSelectedItem().toString();
            for (Grupo gr : sistema.getGrupos()) {
                if (gr.getNombreG().equals(grupo)) {
                    labelPublicacionesGrupo.setText(gr.getTipoGrupo());
                }
            }
        }
    }//GEN-LAST:event_comboVerGruposActionPerformed

    private void btnCrearUsuario1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCrearUsuario1ActionPerformed
        try {
            crearUsuario(evt);
        } catch (IOException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_btnCrearUsuario1ActionPerformed

    private void jbtnLogInActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jbtnLogInActionPerformed
        try {
            entroUsuario(evt);
        } catch (NoSuchAlgorithmException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (NoSuchPaddingException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InvalidKeyException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InvalidAlgorithmParameterException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IllegalBlockSizeException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        } catch (BadPaddingException ex) {
            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_jbtnLogInActionPerformed

    private void jTextFieldEmailFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jTextFieldEmailFocusLost
        if (jTextFieldEmail.getText().equals("")) {
            jTextFieldEmail.setText("asdasd@mail.com");
        }
    }//GEN-LAST:event_jTextFieldEmailFocusLost

    private void jTextFieldEmailFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jTextFieldEmailFocusGained
        jTextFieldEmail.setText("");
    }//GEN-LAST:event_jTextFieldEmailFocusGained

    private void jButtonCargarArchivosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonCargarArchivosActionPerformed
        // TODO add your handling code here:
        Persona p = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                p = pe;
            }
        }
        JFileChooser fc = new JFileChooser();
        fc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
        Archivo a = null;
        int returnVal = fc.showOpenDialog(fc);
        if (returnVal == JFileChooser.APPROVE_OPTION) {
            try {
                File f = fc.getSelectedFile();
                String path = f.getAbsolutePath();
                String nombre = f.getName();
                System.out.println("tipo de archivo " + jComboBox1.getSelectedIndex());
                a = new Archivo(nombre, path, p, jComboBox1.getSelectedIndex());
                p.getArchivos().add(a);
                crearLog("cargar archivo", p.getNomUsuario() + " cargò " + nombre);
                guardarSistema();

            } catch (NoSuchAlgorithmException ex) {
                Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
            } catch (NoSuchPaddingException ex) {
                Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
            } catch (InvalidKeyException ex) {
                Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
            } catch (InvalidAlgorithmParameterException ex) {
                Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IllegalBlockSizeException ex) {
                Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
            } catch (BadPaddingException ex) {
                Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
            }

        }


    }//GEN-LAST:event_jButtonCargarArchivosActionPerformed

    private void jButtonDescargaArchivosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonDescargaArchivosActionPerformed
        // TODO add your handling code here:
        int opc = jTableMisArchivos.getSelectedRow();
        TableModel tabla = jTableMisArchivos.getModel();
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                for (Archivo a : pe.getArchivos()) {
                    if (a.getTitulo().equals(tabla.getValueAt(opc, 1))) {
                        try {
                            a.guardarArchivo();
                        } catch (NoSuchAlgorithmException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (NoSuchPaddingException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (InvalidKeyException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (InvalidAlgorithmParameterException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (IllegalBlockSizeException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (BadPaddingException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (IOException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                }
            }
        }

    }//GEN-LAST:event_jButtonDescargaArchivosActionPerformed

    private void jTabSeguFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jTabSeguFocusGained
        // TODO add your handling code here:
        jComboBox1.removeAllItems();
        Persona p = null;
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                p = pe;
            }
        }
        //Mis archivos
        jTableMisArchivos.removeAll();
        DefaultTableModel tableModel = (DefaultTableModel) jTableMisArchivos.getModel();
        int rowCount = tableModel.getRowCount();
        //Remove rows one by one from the end of the table
        for (int i = rowCount - 1; i >= 0; i--) {
            tableModel.removeRow(i);
        }
        for (Archivo a : p.getArchivos()) {
            Vector<String> v = new Vector<String>();
            String fech = a.getFecha().get(Calendar.YEAR) + "/" + (a.getFecha().get(Calendar.MONTH) + 1) + "/" + a.getFecha().get(Calendar.DATE);
            String nom = a.getTitulo().toString();
            v.add(fech);
            v.add(nom);
            tableModel.addRow(v);
        }
        jTableMisArchivos.setModel(tableModel);
        //Archivos Compartidos
        jComboBox1.addItem("Medicos");
        jComboBox1.addItem("Financieros");
        jComboBox1.addItem("Personales");
        jTableMisArchivos.removeAll();
        DefaultTableModel tableModel1 = (DefaultTableModel) jTableArchivosCompartidos.getModel();
        int rowCount1 = tableModel1.getRowCount();
        //Remove rows one by one from the end of the table
        for (int i = rowCount1 - 1; i >= 0; i--) {
            tableModel1.removeRow(i);
        }
        for (Persona pe : sistema.getPersonas()) {
            for (Archivo a : p.getArchivos()) {
                if (a.getTipo() == pe.getTipo()) {
                    if (a.getTipo() != 2) {
                        if (!pe.equals(p)) {
                            Vector<String> v = new Vector<String>();
                            String fech = a.getFecha().get(Calendar.YEAR) + "/" + (a.getFecha().get(Calendar.MONTH) + 1) + "/" + a.getFecha().get(Calendar.DATE);
                            String nom = a.getTitulo().toString();
                            String us = pe.getNombre();
                            v.add(fech);
                            v.add(nom);
                            v.add(us);
                            tableModel1.addRow(v);
                        }
                    }
                }
            }
        }

        jTableArchivosCompartidos.setModel(tableModel1);

    }//GEN-LAST:event_jTabSeguFocusGained

    private void jButtonDescargarArchivoCompartidoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonDescargarArchivoCompartidoActionPerformed
        // TODO add your handling code here:
        int opc = jTableMisArchivos.getSelectedRow();
        TableModel tabla = jTableMisArchivos.getModel();
        for (Persona pe : sistema.getPersonas()) {
            if (pe.getCorreo().equals(jTextFieldEmail.getText())) {
                for (Archivo a : pe.getArchivos()) {
                    if (a.getTitulo().equals(tabla.getValueAt(opc, 1))) {
                        try {
                            a.guardarArchivo();
                        } catch (NoSuchAlgorithmException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (NoSuchPaddingException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (InvalidKeyException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (InvalidAlgorithmParameterException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (IllegalBlockSizeException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (BadPaddingException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (IOException ex) {
                            Logger.getLogger(GUISeguridad.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    }
                }
            }
        }
    }//GEN-LAST:event_jButtonDescargarArchivoCompartidoActionPerformed

    private void jList1SolicitudesFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jList1SolicitudesFocusGained
        // TODO add your handling code here:
        System.out.println("Seleccionado");
    }//GEN-LAST:event_jList1SolicitudesFocusGained

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;

                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(GUISeguridad.class
                    .getName()).log(java.util.logging.Level.SEVERE, null, ex);

        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(GUISeguridad.class
                    .getName()).log(java.util.logging.Level.SEVERE, null, ex);

        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(GUISeguridad.class
                    .getName()).log(java.util.logging.Level.SEVERE, null, ex);

        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(GUISeguridad.class
                    .getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new GUISeguridad().setVisible(true);
                List<Double> gastos = new ArrayList<Double>();
                gastos.add((double) 25000);
                gastos.add((double) 35700.230);
                gastos.add((double) 53250.35);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnCrearGrupo;
    private javax.swing.JButton btnCrearUsuario1;
    private javax.swing.JButton btnMostrarPublicaciones;
    private javax.swing.JButton btnPublicar;
    private javax.swing.JComboBox<String> comboCitasPerfil;
    private javax.swing.JComboBox<String> comboGastoPerfil;
    private javax.swing.JComboBox<String> comboPublicarGrupo;
    private javax.swing.JComboBox<String> comboVerGrupos;
    private javax.swing.JComboBox<String> comoTipo;
    private javax.swing.JPasswordField contraCrear1;
    private javax.swing.JPasswordField contraLogIn;
    private javax.swing.JPasswordField contraRepitaCrear1;
    private javax.swing.JButton jButtonAceptarSolicitud;
    private javax.swing.JButton jButtonActulizarGruposDisponibles;
    private javax.swing.JButton jButtonCargarArchivos;
    private javax.swing.JButton jButtonDescargaArchivos;
    private javax.swing.JButton jButtonDescargarArchivoCompartido;
    private javax.swing.JButton jButtonRechazarSolicitud;
    private javax.swing.JButton jButtonSolicitar;
    private javax.swing.JComboBox<String> jComboBox1;
    private javax.swing.JComboBox<String> jComboBoxGrupoSolicitud;
    private javax.swing.JComboBox<String> jComboBoxListPublicaciones;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel14r;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel27;
    private javax.swing.JLabel jLabel28;
    private javax.swing.JLabel jLabel29;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel30;
    private javax.swing.JLabel jLabel31;
    private javax.swing.JLabel jLabel32;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JList<String> jList1Solicitudes;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanelGrupos;
    private javax.swing.JPanel jPanelLogIn;
    private javax.swing.JPanel jPanelPerfil;
    private javax.swing.JPanel jPanelSolicitudes;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JScrollPane jScrollPane6;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JTabbedPane jTabSegu;
    private javax.swing.JTabbedPane jTabbedPane2;
    private javax.swing.JTabbedPane jTabbedPaneHome;
    private javax.swing.JTable jTable1;
    private javax.swing.JTable jTableArchivosCompartidos;
    private javax.swing.JTable jTableMisArchivos;
    private javax.swing.JTextArea jTextAreaPublicacion;
    private javax.swing.JTextField jTextFieldEmail;
    private javax.swing.JTextField jTextFieldNuevoTitulo;
    private javax.swing.JToggleButton jToggleButtonActualizarSolicitudes;
    private javax.swing.JButton jbtnLogIn;
    private javax.swing.JPanel jpanelCrearUsu;
    private javax.swing.JPanel jpanelHome;
    private javax.swing.JTextField jtextApellidoCrear;
    private javax.swing.JTextField jtextFieldCorreoCrear;
    private javax.swing.JTextField jtextFieldNomUsu;
    private javax.swing.JTextField jtextIngresosMensualesCrear1;
    private javax.swing.JTextField jtextIngresosMensualesPerfil;
    private javax.swing.JTextField jtextIngresosTotalesCrear1;
    private javax.swing.JTextField jtextIngresosTotalesPerfil;
    private javax.swing.JTextField jtextNombreApellidoPerfil;
    private javax.swing.JTextField jtextNombreCrear;
    private javax.swing.JTextField jtextNombreGrupoCrear;
    private javax.swing.JTextField jtextNombreUsuarioPerfil;
    private javax.swing.JTextField jtextNuevaPublicacion;
    private javax.swing.JTextField jtextTipoGrupoCrear;
    private javax.swing.JLabel labelDatosCita;
    private javax.swing.JLabel labelPublicacionesGrupo;
    // End of variables declaration//GEN-END:variables

    private void entroUsuario(ActionEvent evt) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {
        String email = jTextFieldEmail.getText();
        String contra = contraLogIn.getText();
        boolean valido = Contrasena.verificar(email, contra);
        if (valido) {
            Persona p = null;
            for (Persona pe : sistema.getPersonas()) {
                if (pe.getCorreo().equals(email)) {
                    p = pe;
                }
            }
            if (p != null) {
                if (p.getTipo() == 2) {
                    jTextFieldEmail.setText(email);
                    jTextFieldEmail.setEnabled(false);
                    contraLogIn.setText(contra);
                    contraLogIn.setEnabled(false);
                    jTabSegu.setEnabled(true);
                    jtextNombreApellidoPerfil.setText(p.getNombre() + " " + p.getApellido());
                    jtextNombreUsuarioPerfil.setText(p.getNomUsuario());
                    jtextIngresosMensualesPerfil.setText("NO TIENE PERMISO");
                    jtextIngresosTotalesPerfil.setText("NO TIENE PERMISO");
                    comboGastoPerfil.addItem("NO TIENE PERMISO");
                    comboCitasPerfil.addItem("NO TIENE PERMISO");
                    labelDatosCita.setText("NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO");
                    for (Grupo gr : sistema.getGrupos()) {
                        String elemento = gr.getNombreG();
                        comboVerGrupos.addItem(elemento);
                    }
                    crearLog("login", p.getNomUsuario());
                } else if (p.getTipo() == 1) {
                    System.out.println("Entro");
                    jTextFieldEmail.setText(email);
                    jTextFieldEmail.setEnabled(false);
                    contraLogIn.setText(contra);
                    contraLogIn.setEnabled(false);
                    jTabSegu.setEnabled(true);
                    jtextNombreApellidoPerfil.setText(p.getNombre() + " " + p.getApellido());
                    jtextNombreUsuarioPerfil.setText(p.getNomUsuario());
                    jtextIngresosMensualesPerfil.setText(String.valueOf(p.getDatosF().getIngresosMensuales()));
                    jtextIngresosTotalesPerfil.setText(String.valueOf(p.getDatosF().getDineroTotal()));
                    comboGastoPerfil.setEnabled(true);
                    System.out.println("Sale0");
                    for (Double g : p.getDatosF().getGastos()) {
                        System.out.println("Sale");
                        String gasto = String.valueOf(g);
                        comboGastoPerfil.addItem(gasto);
                    }

                    comboCitasPerfil.addItem("NO TIENE PERMISO");
                    labelDatosCita.setText("NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO");

                    for (Grupo gr : sistema.getGrupos()) {

                        String elemento = gr.getNombreG();
                        comboVerGrupos.addItem(elemento);
                    }
                    for (Grupo gr : sistema.getGrupos()) {
                        if (gr.getUsuarios().contains(p)) {
                            String elemento = gr.getNombreG();
                            comboPublicarGrupo.addItem(elemento);
                        }
                    }
                    crearLog("login", p.getNomUsuario());
                } else if (p.getTipo() == 0) {

                    jTextFieldEmail.setText(email);
                    jTextFieldEmail.setEnabled(false);
                    contraLogIn.setText(contra);
                    contraLogIn.setEnabled(false);
                    jTabSegu.setEnabled(true);
                    jtextNombreApellidoPerfil.setText(p.getNombre() + " " + p.getApellido());
                    jtextNombreUsuarioPerfil.setText(p.getNomUsuario());
                    jtextIngresosMensualesPerfil.setText("NO TIENE PERMISO");
                    jtextIngresosTotalesPerfil.setText("NO TIENE PERMISO");
                    comboGastoPerfil.addItem("NO TIENE PERMISO");
                    comboCitasPerfil.addItem("NO TIENE PERMISO");
                    labelDatosCita.setText("NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO NO TIENE PERMISO");
                    for (Grupo gr : sistema.getGrupos()) {
                        String elemento = gr.getNombreG();
                        comboVerGrupos.addItem(elemento);
                    }
                    crearLog("login", p.getNomUsuario());
                }
            }
        }
    }

    private void crearUsuario(ActionEvent evt) throws IOException, FileNotFoundException, ClassNotFoundException {
        String correo = jtextFieldCorreoCrear.getText();
        String apellido = jtextApellidoCrear.getText();
        String nombre = jtextNombreCrear.getText();
        double ingMensu = Double.parseDouble(jtextIngresosMensualesCrear1.getText());
        double ingTot = Double.parseDouble(jtextIngresosTotalesCrear1.getText());
        String nomUsu = jtextFieldNomUsu.getText();
        String contra = contraCrear1.getText();
        String repite = contraRepitaCrear1.getText();
        if (contra.equals(repite)) {
            Contrasena c = null;
            try {
                c = new Contrasena(contra, correo);
            } catch (NoSuchAlgorithmException ex) {
                Logger.getLogger(GUISeguridad.class
                        .getName()).log(Level.SEVERE, null, ex);

            } catch (IOException ex) {
                Logger.getLogger(GUISeguridad.class
                        .getName()).log(Level.SEVERE, null, ex);

            } catch (NoSuchPaddingException ex) {
                Logger.getLogger(GUISeguridad.class
                        .getName()).log(Level.SEVERE, null, ex);

            } catch (InvalidKeyException ex) {
                Logger.getLogger(GUISeguridad.class
                        .getName()).log(Level.SEVERE, null, ex);

            } catch (InvalidAlgorithmParameterException ex) {
                Logger.getLogger(GUISeguridad.class
                        .getName()).log(Level.SEVERE, null, ex);

            } catch (IllegalBlockSizeException ex) {
                Logger.getLogger(GUISeguridad.class
                        .getName()).log(Level.SEVERE, null, ex);

            } catch (BadPaddingException ex) {
                Logger.getLogger(GUISeguridad.class
                        .getName()).log(Level.SEVERE, null, ex);
            }
            System.out.println("Tipo de usuario " + comoTipo.getSelectedIndex());
            sistema.getPersonas().add(new Persona(nombre, apellido, c, comoTipo.getSelectedIndex(), correo, null, nomUsu, new DatosFinancieros(ingMensu, ingTot, null)));
            crearLog("crear usuario", nomUsu);
            guardarSistema();
        }
    }

    private void guardarSistema() throws FileNotFoundException, IOException, ClassNotFoundException {
        try {
            FileOutputStream fos = new FileOutputStream("fichero.dat");
            FileInputStream fis = new FileInputStream("fichero.dat");
            ObjectOutputStream out = new ObjectOutputStream(fos);
            ObjectInputStream in = new ObjectInputStream(fis);
            Sistema o1 = sistema;

            // Escribir el objeto en el fichero
            out.writeObject(o1);
            System.out.println("Guardo sistema");
        } catch (FileNotFoundException ex) {
            System.out.println(ex);
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    private void cargarSistema() {
        try {
            FileInputStream fis = new FileInputStream("fichero.dat");
            ObjectInputStream in = new ObjectInputStream(fis);
            sistema = (Sistema) in.readObject();
            System.out.println("Cargo sistema");
            in.close();
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    public static boolean crearLog(String transaccion, String usuario) {
        try {
            String[] ids = TimeZone.getAvailableIDs(-8 * 60 * 60 * 1000);
            if (ids.length == 0) {
                System.exit(0);
            }
            System.out.println("Current Time");
            SimpleTimeZone pdt = new SimpleTimeZone(-8 * 60 * 60 * 1000, ids[0]);
            pdt.setStartRule(Calendar.APRIL, 1, Calendar.SUNDAY, 2 * 60 * 60 * 1000);
            pdt.setEndRule(Calendar.OCTOBER, -1, Calendar.SUNDAY, 2 * 60 * 60 * 1000);
            Calendar calendar = new GregorianCalendar(pdt);
            Date trialTime = new Date();
            calendar.setTime(trialTime);
            int anio = calendar.get(Calendar.YEAR);
            int mes = calendar.get(Calendar.MONTH);
            int dia = calendar.get(Calendar.DATE);
            int horas = calendar.get(Calendar.HOUR) + 3;
            int minutos = calendar.get(Calendar.MINUTE);
            System.out.println(anio);
            String fecha = (dia + "/" + mes + "/" + anio + "      " + horas + ":" + minutos);
            PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("log.txt", true)));
            out.append(String.format("%s %20s %20s", fecha, transaccion, usuario) + "\r\n");
            out.close();
            return true;
        } catch (Exception e) {
            System.err.println(e);
        }
        return false;
    }
}
